<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Crawler Bypass for The Library Dispensary</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .fail {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .code-block {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            overflow-x: auto;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            background: #f9f9f9;
            border-left: 4px solid #007bff;
        }
    </style>
</head>
<body>
    <h1>ü§ñ Crawler Bypass Testing Tool</h1>
    <p>This tool helps test if Google and other search engines can bypass the age verification to access business information.</p>

    <div class="test-container">
        <h2>üìã How to Test</h2>
        <ol>
            <li><strong>Local Testing:</strong> Click "Test with Parameter" to simulate a crawler locally</li>
            <li><strong>Browser Testing:</strong> Use Chrome DevTools to change User-Agent</li>
            <li><strong>Google Testing:</strong> Use Google's tools below</li>
        </ol>
    </div>

    <div class="test-container">
        <h2>üß™ Quick Test Links</h2>
        <button onclick="testWithParameter()">Test with Parameter</button>
        <button onclick="testNormalAccess()">Test Normal Access</button>

        <div id="test-results"></div>
    </div>

    <div class="test-container">
        <h2>üîß Manual Testing with Chrome DevTools</h2>
        <div class="code-block">
1. Open Chrome DevTools (F12)
2. Click Menu (‚ãÆ) ‚Üí More tools ‚Üí Network conditions
3. Uncheck "Use browser default" for User agent
4. Select "Googlebot" from dropdown
5. Refresh the page
6. Check if age verification is bypassed
        </div>
    </div>

    <div class="test-container">
        <h2>üåê Test User Agents</h2>
        <p>Copy these to test different crawlers:</p>
        <div class="code-block">
Google: Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)
Google Inspection: Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/W.X.Y.Z Mobile Safari/537.36 (compatible; Google-InspectionTool/1.0;)
Bing: Mozilla/5.0 (compatible; bingbot/2.0; +http://www.bing.com/bingbot.htm)
Facebook: facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)
        </div>
    </div>

    <div class="test-container">
        <h2>‚úÖ Expected Business Information</h2>
        <p>When the bypass works, Google should be able to see:</p>
        <ul>
            <li><strong>Business Name:</strong> The Library Dispensary</li>
            <li><strong>Address:</strong> 1-3 Washington St, West Orange, NJ 07052</li>
            <li><strong>Phone:</strong> (973) 731-1199</li>
            <li><strong>Hours:</strong> Mon-Thu 10am-9pm, Fri-Sat 10am-10pm, Sun 10am-8pm</li>
            <li><strong>Structured Data:</strong> LocalBusiness, Organization, and Website schemas</li>
        </ul>
    </div>

    <div class="test-container">
        <h2>üîç Google Verification Tools</h2>
        <p>Use these official Google tools to verify the fix:</p>
        <ol>
            <li>
                <strong>Rich Results Test:</strong><br>
                <a href="https://search.google.com/test/rich-results?url=https://thelibrarynj.com" target="_blank">
                    Test thelibrarynj.com for structured data
                </a>
            </li>
            <li>
                <strong>Mobile-Friendly Test:</strong><br>
                <a href="https://search.google.com/test/mobile-friendly?url=https://thelibrarynj.com" target="_blank">
                    Test mobile accessibility
                </a>
            </li>
            <li>
                <strong>URL Inspection (Search Console):</strong><br>
                Use Google Search Console to inspect how Google sees the page
            </li>
            <li>
                <strong>PageSpeed Insights:</strong><br>
                <a href="https://pagespeed.web.dev/analysis?url=https://thelibrarynj.com" target="_blank">
                    Check if content loads for Google
                </a>
            </li>
        </ol>
    </div>

    <div class="test-container">
        <h2>‚ö†Ô∏è Important Notes</h2>
        <ul>
            <li>The bypass ONLY works for search engine crawlers, not regular users</li>
            <li>Age verification is still mandatory for human visitors (legal requirement)</li>
            <li>Changes may take time to reflect in Google Business Profile</li>
            <li>Monitor Google Search Console for crawl errors</li>
        </ul>
    </div>

    <script>
        function testWithParameter() {
            const testUrl = window.location.origin + '/?bypass_age_verification=googlebot_test';
            const resultsDiv = document.getElementById('test-results');

            resultsDiv.innerHTML = `
                <div class="result">
                    <h3>Testing with bypass parameter...</h3>
                    <p>Opening: <a href="${testUrl}" target="_blank">${testUrl}</a></p>
                    <p>This should bypass the age verification for testing.</p>
                    <p>Check if you can see the homepage content without age verification.</p>
                </div>
            `;

            window.open(testUrl, '_blank');
        }

        function testNormalAccess() {
            const testUrl = window.location.origin + '/';
            const resultsDiv = document.getElementById('test-results');

            resultsDiv.innerHTML = `
                <div class="result">
                    <h3>Testing normal access...</h3>
                    <p>Opening: <a href="${testUrl}" target="_blank">${testUrl}</a></p>
                    <p>This should show the age verification gate.</p>
                    <p>Confirm that age verification appears for regular users.</p>
                </div>
            `;

            // Clear any existing session storage to ensure fresh test
            if (typeof sessionStorage !== 'undefined') {
                sessionStorage.clear();
            }

            window.open(testUrl, '_blank');
        }

        // Display current user agent
        window.addEventListener('DOMContentLoaded', () => {
            const currentUA = navigator.userAgent;
            console.log('Current User Agent:', currentUA);
        });
    </script>
</body>
</html>